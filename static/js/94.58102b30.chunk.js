"use strict";(self.webpackChunk_11men_frontend=self.webpackChunk_11men_frontend||[]).push([[94],{86:(e,s,t)=>{t.d(s,{AICodeValidator:()=>n});class n{static validate(e){const s=[],t=[];e.length>this.MAX_CODE_LENGTH&&s.push("Code exceeds maximum length (".concat(e.length,"/").concat(this.MAX_CODE_LENGTH," characters)"));const n=e.split("\n");n.length>this.MAX_LINES&&s.push("Code exceeds maximum lines (".concat(n.length,"/").concat(this.MAX_LINES," lines)"));for(const{pattern:c,message:l}of this.FORBIDDEN_PATTERNS)c.test(e)&&s.push(l);try{new Function(e)}catch(o){s.push("Syntax error: ".concat(o.message))}e.includes("function makeGuess")||e.includes("makeGuess =")||s.push("makeGuess function not found");const r=[/while\s*\(\s*true\s*\)/g,/while\s*\(\s*1\s*\)/g,/for\s*\(\s*;\s*;\s*\)/g];for(const c of r)c.test(e)&&t.push("Potential infinite loop detected");const i=this.analyzeComplexity(e);i.complexity>100&&t.push("High code complexity detected (score: ".concat(i.complexity,")"));const a=[{pattern:/\bthis\b/g,message:'Use of "this" keyword may cause issues'},{pattern:/\barguments\b/g,message:'Use of "arguments" object is discouraged'},{pattern:/\.call\s*\(/g,message:"Use of .call() is suspicious"},{pattern:/\.apply\s*\(/g,message:"Use of .apply() is suspicious"},{pattern:/\.bind\s*\(/g,message:"Use of .bind() may affect performance"}];for(const{pattern:c,message:l}of a)c.test(e)&&t.push(l);return{isValid:0===s.length,errors:s,warnings:t.length>0?t:void 0}}static analyzeComplexity(e){const s=e.split("\n").length,t=(e.match(/\b(for|while|do)\b/g)||[]).length;return{lines:s,loops:t,functions:(e.match(/\bfunction\b/g)||[]).length,complexity:1+(e.match(/\b(if|else|switch|case)\b/g)||[]).length+t}}static preprocessCode(e){let s=e.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*$/gm,"");return s=s.trim(),!s.includes("return makeGuess")&&s.includes("function makeGuess")&&(s+='\n\n// Auto-added by preprocessor\nif (typeof makeGuess === "function") { makeGuess; }'),s}}n.FORBIDDEN_PATTERNS=[{pattern:/eval\s*\(/g,message:"eval() is not allowed"},{pattern:/Function\s*\(/g,message:"Function constructor is not allowed"},{pattern:/setTimeout/g,message:"setTimeout is not allowed"},{pattern:/setInterval/g,message:"setInterval is not allowed"},{pattern:/setImmediate/g,message:"setImmediate is not allowed"},{pattern:/fetch\s*\(/g,message:"fetch() is not allowed"},{pattern:/XMLHttpRequest/g,message:"XMLHttpRequest is not allowed"},{pattern:/import\s+/g,message:"import statements are not allowed"},{pattern:/require\s*\(/g,message:"require() is not allowed"},{pattern:/process\./g,message:"process object is not allowed"},{pattern:/global\./g,message:"global object is not allowed"},{pattern:/window\./g,message:"window object is not allowed"},{pattern:/document\./g,message:"document object is not allowed"},{pattern:/self\./g,message:"self object is not allowed"},{pattern:/__proto__/g,message:"__proto__ is not allowed"},{pattern:/constructor\s*\[/g,message:"constructor property access is not allowed"},{pattern:/\.constructor/g,message:"constructor property is not allowed"},{pattern:/new\s+Worker/g,message:"Worker is not allowed"},{pattern:/postMessage/g,message:"postMessage is not allowed"},{pattern:/localStorage/g,message:"localStorage is not allowed"},{pattern:/sessionStorage/g,message:"sessionStorage is not allowed"},{pattern:/indexedDB/g,message:"indexedDB is not allowed"},{pattern:/crypto\./g,message:"crypto object is not allowed"},{pattern:/WebAssembly/g,message:"WebAssembly is not allowed"},{pattern:/SharedArrayBuffer/g,message:"SharedArrayBuffer is not allowed"},{pattern:/Atomics/g,message:"Atomics is not allowed"}],n.MAX_CODE_LENGTH=1e4,n.MAX_LINES=500,n.MAX_LOOP_DEPTH=5,n.MAX_FUNCTION_DEPTH=10},94:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var n=t(366),r=(t(934),t(579));const i=()=>(0,r.jsxs)("div",{className:"tetris-container",children:[(0,r.jsxs)("div",{className:"tetris-header",children:[(0,r.jsx)("h1",{children:"AI \ud14c\ud2b8\ub9ac\uc2a4"}),(0,r.jsx)("p",{className:"tetris-description",children:"AI\ub85c \uc2dc\uc791\ud55c \ud14c\ud2b8\ub9ac\uc2a4 \uac8c\uc784 \ub9cc\ub4e4\uae30 \ud504\ub85c\uc81d\ud2b8\uc785\ub2c8\ub2e4. \ud604\uc7ac \ubc84\uc804\uc5d0\uc11c\ub294 \uae30\ubcf8\uc801\uc778 \ud14c\ud2b8\ub9ac\uc2a4 \uac8c\uc784\ud50c\ub808\uc774\ub97c \uad6c\ud604\ud588\uc2b5\ub2c8\ub2e4."})]}),(0,r.jsx)("div",{className:"tetris-content",children:(0,r.jsx)("iframe",{src:"/web/lab/html/tetris.html",title:"AI Tetris Game",className:"tetris-frame",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),(0,r.jsxs)("div",{className:"tetris-info",children:[(0,r.jsx)("h2",{children:"\ud504\ub85c\uc81d\ud2b8 \uc815\ubcf4"}),(0,r.jsxs)("div",{className:"info-grid",children:[(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)("h3",{children:"\uac1c\ubc1c \uae30\uac04"}),(0,r.jsx)("p",{children:"2024.06.11 ~ \ud604\uc7ac"})]}),(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)("h3",{children:"\uc0ac\uc6a9 \uae30\uc220"}),(0,r.jsx)("p",{children:"HTML, CSS, JavaScript"})]}),(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)("h3",{children:"\uc8fc\uc694 \uae30\ub2a5"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"\uae30\ubcf8 \ud14c\ud2b8\ub9ac\uc2a4 \uac8c\uc784\ud50c\ub808\uc774"}),(0,r.jsx)("li",{children:"\uc810\uc218 \uc2dc\uc2a4\ud15c"}),(0,r.jsx)("li",{children:"\ub808\ubca8 \uc2dc\uc2a4\ud15c"})]})]}),(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)("h3",{children:"\ud5a5\ud6c4 \uacc4\ud68d"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"AI \ud559\uc2b5 \ubaa8\ub378 \ud1b5\ud569"}),(0,r.jsx)("li",{children:"\uba40\ud2f0\ud50c\ub808\uc774\uc5b4 \uc9c0\uc6d0"}),(0,r.jsx)("li",{children:"\ucee4\uc2a4\ud140 \ud14c\ub9c8"})]})]})]})]})]});var a=t(555),o=t(43);class c{constructor(e){this.playerInfo=void 0,this.ready=!1,this.playerInfo=e}getInfo(){return this.playerInfo}isReady(){return this.ready}onTurnStart(){}onTurnEnd(e){}reset(){this.ready=!1}}class l extends c{constructor(e){super(e),this.resolveGuess=void 0,this.ready=!0}async makeGuess(e){return new Promise((e=>{this.resolveGuess=e}))}submitGuess(e){this.resolveGuess&&(this.resolveGuess(e),this.resolveGuess=void 0)}isWaitingForInput(){return void 0!==this.resolveGuess}reset(){super.reset(),this.resolveGuess=void 0,this.ready=!0}}class d extends c{constructor(e,s){super(e),this.strategy=void 0,this.thinkingTime=2e3,this.strategy=s,this.ready=!0}async makeGuess(e){const s=Date.now(),t=this.strategy.selectKeywords(e),n=Date.now()-s,r=Math.max(0,this.thinkingTime-n);return r>0&&await new Promise((e=>setTimeout(e,r))),t}setThinkingTime(e){this.thinkingTime=Math.max(500,e)}getStrategy(){return this.strategy}setStrategy(e){this.strategy=e}}var u=t(86);class m{constructor(){this.executionCounter=0,this.MAX_EXECUTION_TIME=2500}static getInstance(){return m.instance||(m.instance=new m),m.instance}async executeUserAI(e,s,t){const n=performance.now(),r=[];try{const t=u.AICodeValidator.validate(e);if(!t.isValid)return{success:!1,error:"Code validation failed: ".concat(t.errors.join("; ")),executionTime:performance.now()-n};t.warnings&&r.push(...t.warnings.map((e=>"Warning: ".concat(e))));const i=u.AICodeValidator.preprocessCode(e),a=this.createSecureGameState(s),o=await this.executeInWorker(i,a,r);return{success:!0,result:o,executionTime:performance.now()-n,logs:r.length>0?r:void 0}}catch(i){const e=performance.now()-n;return{success:!1,error:i.message||"Unknown error occurred",executionTime:e,logs:r.length>0?r:void 0}}}createSecureGameState(e){const s=e=>(Object.freeze(e),Object.getOwnPropertyNames(e).forEach((t=>{null===e[t]||"object"!==typeof e[t]&&"function"!==typeof e[t]||Object.isFrozen(e[t])||s(e[t])})),e);return s({keywords:[...e.keywords],myHints:[...e.myHints],answerCount:e.answerCount,previousGuesses:e.previousGuesses.map((e=>({playerId:e.playerId,guess:[...e.guess],correctCount:e.correctCount}))),revealedAnswers:[...e.revealedAnswers],revealedWrongAnswers:[...e.revealedWrongAnswers],currentTurn:e.currentTurn,timeLimit:e.timeLimit})}executeInWorker(e,s,t){return new Promise(((n,r)=>{const i="exec_".concat(++this.executionCounter,"_").concat(Date.now());let a="/web/ai-worker.js";window.location.pathname.startsWith("/web")&&!a.startsWith("/web")&&(a="/web/ai-worker.js");const o=new Worker(a),c=setTimeout((()=>{o.terminate(),r(new Error("Execution timeout exceeded (2 seconds)"))}),this.MAX_EXECUTION_TIME);o.onmessage=e=>{const{type:s,executionId:a,result:l,error:d,data:u}=e.data;if("log"!==s||a!==i)a===i&&(clearTimeout(c),o.terminate(),d?r(new Error(d)):l?n(l):r(new Error("No result returned from AI")));else{const e=u.map((e=>"object"===typeof e?JSON.stringify(e):String(e))).join(" ");t.push(e)}},o.onerror=e=>{clearTimeout(c),o.terminate();let s="Worker error: ";e.message?s+=e.message:s+="Failed to load worker file. Make sure ai-worker.js is in the public directory.",console.error("Worker load error:",e),console.error("Worker path attempted:",a),r(new Error(s))},o.postMessage({code:e,gameState:s,executionId:i})}))}static validateGuess(e,s){if(!Array.isArray(e))return"Guess must be an array";if(e.length!==s.answerCount)return"Guess must contain exactly ".concat(s.answerCount," elements");const t=s.keywords.length;for(let n=0;n<e.length;n++){const r=e[n];if("number"!==typeof r||!Number.isInteger(r))return"Element at index ".concat(n," must be an integer");if(r<0||r>=t)return"Element at index ".concat(n," (").concat(r,") is out of bounds");if(s.myHints.includes(r))return"Element at index ".concat(n," (").concat(r,") is one of your hints")}return new Set(e).size!==e.length?"Guess contains duplicate indices":null}}m.instance=void 0;class h{constructor(){this.metricsHistory=[],this.MAX_HISTORY_SIZE=1e3}static getInstance(){return h.instance||(h.instance=new h),h.instance}async measureExecution(e,s){const t=performance.now(),n=this.getMemoryUsage();try{const r=await e(),i=performance.now(),o=this.getMemoryUsage(),c={executionTime:i-t,memoryUsage:o&&n?o-n:void 0};return void 0!==(null===s||void 0===s?void 0:s.playerId)&&this.recordMetrics((0,a.A)((0,a.A)({},c),{},{timestamp:Date.now(),playerId:s.playerId,success:!0})),[r,c]}catch(r){const e=performance.now(),i=this.getMemoryUsage(),o={executionTime:e-t,memoryUsage:i&&n?i-n:void 0};throw void 0!==(null===s||void 0===s?void 0:s.playerId)&&this.recordMetrics((0,a.A)((0,a.A)({},o),{},{timestamp:Date.now(),playerId:s.playerId,success:!1,errorType:r.constructor.name})),{error:r,metrics:o}}}measureSync(e){const s=performance.now(),t=this.getMemoryUsage(),n=e(),r=performance.now(),i=this.getMemoryUsage();return[n,{executionTime:r-s,memoryUsage:i&&t?i-t:void 0}]}getMemoryUsage(){if("memory"in performance)return performance.memory.usedJSHeapSize}recordMetrics(e){this.metricsHistory.push(e),this.metricsHistory.length>this.MAX_HISTORY_SIZE&&(this.metricsHistory=this.metricsHistory.slice(-this.MAX_HISTORY_SIZE))}getPlayerStats(e){const s=this.metricsHistory.filter((s=>s.playerId===e));if(0===s.length)return{totalExecutions:0,successRate:0,averageExecutionTime:0,maxExecutionTime:0,recentErrors:[]};const t=s.filter((e=>e.success)),n=s.reduce(((e,s)=>e+s.executionTime),0),r=Math.max(...s.map((e=>e.executionTime))),i=s.filter((e=>!e.success&&e.errorType)).slice(-5).map((e=>e.errorType));return{totalExecutions:s.length,successRate:t.length/s.length,averageExecutionTime:n/s.length,maxExecutionTime:r,recentErrors:i}}getGlobalStats(){if(0===this.metricsHistory.length)return{totalExecutions:0,averageSuccessRate:0,averageExecutionTime:0,peakExecutionTime:0,activePlayerCount:0};const e=this.metricsHistory.filter((e=>e.success)),s=this.metricsHistory.reduce(((e,s)=>e+s.executionTime),0),t=Math.max(...this.metricsHistory.map((e=>e.executionTime))),n=new Set(this.metricsHistory.map((e=>e.playerId)));return{totalExecutions:this.metricsHistory.length,averageSuccessRate:e.length/this.metricsHistory.length,averageExecutionTime:s/this.metricsHistory.length,peakExecutionTime:t,activePlayerCount:n.size}}clearHistory(){this.metricsHistory=[]}}h.instance=void 0;class g{constructor(){this.executor=void 0,this.monitor=void 0,this.executor=m.getInstance(),this.monitor=h.getInstance()}static getInstance(){return g.instance||(g.instance=new g),g.instance}async executeWithFallback(e,s,t,n){try{const[r,i]=await this.monitor.measureExecution((()=>this.executor.executeUserAI(e,s,t)),{playerId:t});if(r.success&&r.result)return console.log("AI execution successful for player ".concat(t," (").concat(n,")"),{executionTime:r.executionTime,guess:r.result,logs:r.logs}),{playerId:t,playerName:n,guess:r.result,success:!0,executionTime:r.executionTime||0,logs:r.logs,metrics:i};throw new Error(r.error||"Unknown execution error")}catch(i){var r;console.error("AI execution failed for player ".concat(t," (").concat(n,"):"),i);const e=this.generateFallbackGuess(s),o=i.metrics?{error:(null===(r=i.error)||void 0===r?void 0:r.message)||"Unknown error",executionTime:i.metrics.executionTime}:{error:i.message||"Unknown error",executionTime:0};return(0,a.A)((0,a.A)({playerId:t,playerName:n,guess:e,success:!1},o),{},{metrics:i.metrics})}}generateFallbackGuess(e){const s=[];for(let n=0;n<e.keywords.length;n++)e.myHints.includes(n)||e.revealedWrongAnswers.includes(n)||s.push(n);const t=[...e.revealedAnswers];for(;t.length<e.answerCount&&s.length>0;){const e=Math.floor(Math.random()*s.length),n=s.splice(e,1)[0];t.includes(n)||t.push(n)}if(t.length<e.answerCount)for(let n=0;n<e.keywords.length&&t.length<e.answerCount;n++)e.myHints.includes(n)||t.includes(n)||t.push(n);return t.slice(0,e.answerCount)}getPlayerStats(e){return this.monitor.getPlayerStats(e)}getGlobalStats(){return this.monitor.getGlobalStats()}async validateCode(e){const{AICodeValidator:s}=await Promise.resolve().then(t.bind(t,86)),n=s.validate(e);return{valid:n.isValid,errors:n.errors.length>0?n.errors:void 0,warnings:n.warnings}}async testAICode(e,s){const t=s||this.createSampleGameState();try{return await this.executor.executeUserAI(e,t,-1)}catch(n){return{success:!1,error:n.message||"Test execution failed"}}}createSampleGameState(){return{keywords:["\uc0ac\uacfc","\ubc14\ub098\ub098","\uccb4\ub9ac","\ud3ec\ub3c4","\ub9dd\uace0","\ubcf5\uc22d\uc544","\ub538\uae30","\uc218\ubc15","\uba5c\ub860","\ud0a4\uc704"],myHints:[1,3],answerCount:3,previousGuesses:[{playerId:1,guess:[0,2,4],correctCount:2},{playerId:2,guess:[2,5,6],correctCount:1}],revealedAnswers:[],revealedWrongAnswers:[7],currentTurn:3,timeLimit:60}}}g.instance=void 0;class p extends c{constructor(e){super(e),this.aiCode=void 0,this.aiLanguage=void 0,this.executionHandler=void 0,this.aiCode=e.customCode||"",this.aiLanguage=e.customLanguage||"javascript",this.executionHandler=g.getInstance(),this.ready=this.validateCode()}async makeGuess(e){try{const s=await this.executionHandler.executeWithFallback(this.aiCode,e,this.playerInfo.id,this.playerInfo.nickname);return s.success||(console.error("Custom AI execution failed for ".concat(this.playerInfo.nickname,":"),s.error),s.logs&&s.logs.length>0&&console.log("AI logs for ".concat(this.playerInfo.nickname,":"),s.logs)),s.guess}catch(s){return console.error("Unexpected error in Custom AI execution:",s),this.fallbackStrategy(e)}}fallbackStrategy(e){const s=Array.from({length:e.keywords.length},((e,s)=>s)).filter((s=>!e.revealedWrongAnswers.includes(s))),t=[...e.revealedAnswers];for(;t.length<e.answerCount&&s.length>0;){const e=s.filter((e=>!t.includes(e)));if(0===e.length)break;const n=e[Math.floor(Math.random()*e.length)];t.push(n)}return t}validateCode(){if(!this.aiCode.trim())return!1;this.executionHandler.validateCode(this.aiCode);try{return new Function(this.aiCode),!0}catch(e){return console.error("AI code validation error:",e),!1}}async validateCodeAsync(){return await this.executionHandler.validateCode(this.aiCode)}updateCode(e,s){this.aiCode=e,this.aiLanguage=s,this.ready=this.validateCode()}getCode(){return this.aiCode}getLanguage(){return this.aiLanguage}}class x{selectKeywords(e){const{keywords:s,revealedAnswers:t,revealedWrongAnswers:n,answerCount:r,previousGuesses:i,myHints:a}=e,o=new Map;for(let m=0;m<s.length;m++)o.set(m,0);i.forEach((e=>{const{guess:s,correctCount:t}=e;if(0===t)s.forEach((e=>{o.set(e,(o.get(e)||0)-5)}));else{const e=t/s.length;s.forEach((s=>{o.set(s,(o.get(s)||0)+e)}))}}));const c=new Set([...n,...a]);c.forEach((e=>{o.delete(e)}));const l=[...t],d=Array.from(o.entries()).filter((e=>{let[s]=e;return!l.includes(s)&&!c.has(s)})).sort(((e,s)=>s[1]-e[1])),u=r-l.length;if(u>0){[...d.slice(0,Math.max(2*u,10))].sort((()=>Math.random()-.5)).slice(0,u).forEach((e=>{l.push(e[0])}))}if(l.length<r){const e=d.filter((e=>!l.includes(e[0]))),s=r-l.length;e.slice(0,s).forEach((e=>{l.push(e[0])}))}return l}getStrategyName(){return"Easy AI"}getDescription(){return"\uacfc\uac70 \ucd94\uce21\uc758 \uc815\ub2f5\ub960\uc744 \uae30\ubc18\uc73c\ub85c \ud0a4\uc6cc\ub4dc \uc810\uc218\ub97c \ub9e4\uaca8 \ucd94\uce21\ud569\ub2c8\ub2e4."}}class y{selectKeywords(e){const{keywords:s,revealedAnswers:t,revealedWrongAnswers:n,answerCount:r,previousGuesses:i,myHints:a}=e,o=new Map;for(let m=0;m<s.length;m++)o.set(m,0);i.forEach((e=>{const{guess:s,correctCount:t}=e,n=t>0?t/s.length:-1;s.forEach((e=>{o.set(e,(o.get(e)||0)+n)}))}));for(let m=0;m<i.length;m++)for(let e=m+1;e<i.length;e++){const s=i[m],t=i[e],n=new Set(s.guess),r=new Set(t.guess),a=s.guess.filter((e=>!r.has(e))),c=t.guess.filter((e=>!n.has(e))),l=s.correctCount-t.correctCount;if(1===a.length&&1===c.length){const e=a[0],s=c[0];1===l?(o.set(e,(o.get(e)||0)+10),o.set(s,(o.get(s)||0)-10)):-1===l&&(o.set(s,(o.get(s)||0)+10),o.set(e,(o.get(e)||0)-10))}else if(a.length>0&&c.length>0&&Math.abs(l)>0){const e=3*(Math.abs(l)/(a.length+c.length));l>0?(a.forEach((s=>o.set(s,(o.get(s)||0)+e))),c.forEach((s=>o.set(s,(o.get(s)||0)-e)))):(c.forEach((s=>o.set(s,(o.get(s)||0)+e))),a.forEach((s=>o.set(s,(o.get(s)||0)-e))))}}const c=new Set([...n,...a,...t]);c.forEach((e=>{o.delete(e)}));const l=Array.from(o.entries()).sort(((e,s)=>s[1]-e[1])),d=[...t],u=r-d.length;if(u>0){const e=l.map((e=>e[0])).filter((e=>!d.includes(e)));d.push(...e.slice(0,u))}if(d.length<r){const e=Array.from({length:s.length},((e,s)=>s)).filter((e=>!c.has(e)&&!d.includes(e))).sort((()=>Math.random()-.5)),t=r-d.length;d.push(...e.slice(0,t))}return d}getStrategyName(){return"Medium AI"}getDescription(){return"\ucd94\uce21\ub4e4\uc744 \uc815\uad50\ud558\uac8c \ube44\uad50\ud558\uc5ec \ub17c\ub9ac\uc801\uc778 \ub2e8\uc11c\ub97c \ucc3e\uace0, \uc774\ub97c \uae30\ubc18\uc73c\ub85c \ucd94\uce21\ud569\ub2c8\ub2e4."}}class w{constructor(){this.fallbackStrategy=void 0,this.fallbackStrategy=new y}selectKeywords(e){const{keywords:s,answerCount:t,previousGuesses:n,revealedAnswers:r,revealedWrongAnswers:i,myHints:a}=e,o=this.findValidHypotheses(e);return 1===o.length?(console.log("Hard AI: \uc815\ub2f5\uc744 \ucc3e\uc558\uc2b5\ub2c8\ub2e4!",o[0]),o[0]):o.length>1?(console.log("Hard AI: ".concat(o.length,"\uac1c\uc758 \ud6c4\ubcf4\ub97c \ucc3e\uc558\uc2b5\ub2c8\ub2e4."),o),o[0]):(console.log("Hard AI: \ud6c4\ubcf4\ub97c \ucc3e\uc9c0 \ubabb\ud574 Medium \uc804\ub7b5\uc73c\ub85c \uc804\ud658\ud569\ub2c8\ub2e4."),this.fallbackStrategy.selectKeywords(e))}findValidHypotheses(e){const{keywords:s,answerCount:t,previousGuesses:n,revealedAnswers:r,revealedWrongAnswers:i,myHints:a}=e,o=Date.now(),c=new Set(r),l=new Set([...i,...a]),d=(new y).selectKeywords(e),u=Array.from(c).concat(d),m=new Set(u),h=Array.from(m).filter((e=>!l.has(e))),g=[],p=(e,s)=>{Date.now()-o>500||g.length>10||(s.length!==t?e>=h.length||(s.push(h[e]),p(e+1,s),s.pop(),h.length-(e+1)>=t-s.length&&p(e+1,s)):this.validateHypothesis(s,n)&&g.push([...s]))};return p(0,[]),g}validateHypothesis(e,s){const t=new Set(e);for(const n of s){if(n.guess.filter((e=>t.has(e))).length!==n.correctCount)return!1}return!0}getStrategyName(){return"Hard AI"}getDescription(){return"\uacfc\uac70\uc758 \ubaa8\ub4e0 \ucd94\uce21\uc744 \ub17c\ub9ac\uc801 \uc81c\uc57d\uc870\uac74\uc73c\ub85c \uc0ac\uc6a9\ud558\uc5ec, \uc774\ub97c \ub9cc\uc871\ud558\ub294 \uc815\ub2f5 \ud6c4\ubcf4\ub97c \ucc3e\uc544\ub0c5\ub2c8\ub2e4."}}class v{static createPlayer(e){switch(e.type){case"human":return new l(e);case"built-in-ai":const s=this.getStrategy(e.aiDifficulty||"medium");return new d(e,s);case"custom-ai":return new p(e);default:throw new Error("Unknown player type: ".concat(e.type))}}static getStrategy(e){if(!this.strategyCache.has(e)){let s;switch(e){case"easy":s=new x;break;case"medium":default:s=new y;break;case"hard":s=new w}this.strategyCache.set(e,s)}return this.strategyCache.get(e)}static createBuiltInAIOpponent(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";const t={id:e,nickname:"AI (".concat("easy"===s?"\uc26c\uc6c0":"medium"===s?"\ubcf4\ud1b5":"\uc5b4\ub824\uc6c0",")"),type:"built-in-ai",aiDifficulty:s};return this.createPlayer(t)}static isHumanPlayer(e){return e instanceof l}static isBuiltInAIPlayer(e){return e instanceof d}static isCustomAIPlayer(e){return e instanceof p}}v.strategyCache=new Map;class f{constructor(e){this.players=[],this.currentPlayerIndex=0,this.gameContext=void 0,this.config=void 0,this.isGameRunning=!1,this.turnTimer=void 0,this.turnStartTime=0,this.onTurnStart=void 0,this.onTurnEnd=void 0,this.onGameEnd=void 0,this.onTimerTick=void 0,this.onAIThinking=void 0,this.config=e,this.gameContext={keywords:[],answers:[],playerHints:{},currentTurn:0,turnHistory:[],revealedAnswers:[],revealedWrongAnswers:[]}}addPlayer(e){if(this.isGameRunning)throw new Error("Cannot add players while game is running");this.players.push(e)}setPlayers(e){if(this.isGameRunning)throw new Error("Cannot set players while game is running");this.players=e}getCurrentPlayer(){return this.isGameRunning&&0!==this.players.length?this.players[this.currentPlayerIndex]:null}getPlayers(){return[...this.players]}getGameContext(){return(0,a.A)({},this.gameContext)}async startGame(e,s,t){if(0===this.players.length)throw new Error("No players added to the game");this.gameContext={keywords:e,answers:s,playerHints:t,currentTurn:1,turnHistory:[],revealedAnswers:[],revealedWrongAnswers:[]},this.currentPlayerIndex=0,this.isGameRunning=!0,await this.startNextTurn()}async startNextTurn(){var e;if(!this.isGameRunning)return;const s=this.getCurrentPlayer();if(s)if(this.turnStartTime=Date.now(),this.onTurnStart&&this.onTurnStart(s),null===(e=s.onTurnStart)||void 0===e||e.call(s),v.isHumanPlayer(s)){this.startTurnTimer();const e=this.createGameStateForAI(s);s.makeGuess(e).then((e=>{this.processTurn(e)}))}else{this.startTurnTimer(),this.onAIThinking&&this.onAIThinking(!0);const e=2e3*Math.random()+1500;await new Promise((s=>setTimeout(s,e)));const t=this.createGameStateForAI(s),n=await s.makeGuess(t);this.onAIThinking&&this.onAIThinking(!1),await this.processTurn(n)}}startTurnTimer(){let e=this.config.timeLimit;this.onTimerTick&&this.onTimerTick(e),this.turnTimer=setInterval((()=>{e--,this.onTimerTick&&this.onTimerTick(e),e<=0&&this.handleTimeout()}),1e3)}stopTurnTimer(){this.turnTimer&&(clearInterval(this.turnTimer),this.turnTimer=void 0)}handleTimeout(){this.stopTurnTimer();const e=this.getCurrentPlayer();if(!e)return;const s=[...Array.from({length:this.gameContext.keywords.length},((e,s)=>s)).filter((e=>!this.gameContext.revealedWrongAnswers.includes(e)))].sort((()=>Math.random()-.5)).slice(0,this.config.answerCount);v.isHumanPlayer(e)?e.submitGuess(s):this.processTurn(s)}async submitHumanGuess(e){const s=this.getCurrentPlayer();if(!s||!v.isHumanPlayer(s))throw new Error("Current player is not a human player");this.stopTurnTimer(),s.submitGuess(e)}async processTurn(e){var s;const t=this.getCurrentPlayer();if(!t)return;this.stopTurnTimer();const n=e.filter((e=>this.gameContext.answers.includes(e))).length,r=n===this.config.answerCount&&e.every((e=>this.gameContext.answers.includes(e))),i=Math.round((Date.now()-this.turnStartTime)/1e3),a={playerId:t.getInfo().id,playerName:t.getInfo().nickname,guess:[...e],guessKeywords:e.map((e=>this.gameContext.keywords[e])),correctCount:n,turnNumber:this.gameContext.currentTurn,timeUsed:i};this.gameContext.turnHistory.push(a),null===(s=t.onTurnEnd)||void 0===s||s.call(t,{selectedIndices:e,timeUsed:a.timeUsed,timestamp:Date.now()}),this.onTurnEnd&&this.onTurnEnd(a),r?this.endGame(t):this.config.maxTurns&&this.gameContext.currentTurn>=this.config.maxTurns?this.endGame():(this.gameContext.currentTurn++,this.currentPlayerIndex=(this.currentPlayerIndex+1)%this.players.length,await this.startNextTurn())}createGameStateForAI(e){const s=e.getInfo(),t=this.gameContext.playerHints[s.id]||[],n=this.gameContext.turnHistory.map((e=>({playerId:e.playerId,guess:e.guess,correctCount:e.correctCount})));return{keywords:[...this.gameContext.keywords],myHints:t,previousGuesses:n,revealedAnswers:[...this.gameContext.revealedAnswers],revealedWrongAnswers:[...this.gameContext.revealedWrongAnswers],answerCount:this.config.answerCount,currentTurn:this.gameContext.currentTurn,maxTurns:this.config.maxTurns,timeLimit:this.config.timeLimit}}revealAnswer(){const e=this.gameContext.answers.filter((e=>!this.gameContext.revealedAnswers.includes(e)));if(0===e.length)return!1;const s=e[Math.floor(Math.random()*e.length)];return this.gameContext.revealedAnswers.push(s),!0}revealWrongAnswer(){const e=Array.from({length:this.gameContext.keywords.length},((e,s)=>s)).filter((e=>!this.gameContext.answers.includes(e)&&!this.gameContext.revealedWrongAnswers.includes(e)));if(0===e.length)return!1;const s=e[Math.floor(Math.random()*e.length)];return this.gameContext.revealedWrongAnswers.push(s),!0}endGame(e){this.stopTurnTimer(),this.isGameRunning=!1,this.onGameEnd&&this.onGameEnd(e)}stopGame(){this.stopTurnTimer(),this.isGameRunning=!1,this.players.forEach((e=>e.reset()))}isRunning(){return this.isGameRunning}setEventHandlers(e){this.onTurnStart=e.onTurnStart,this.onTurnEnd=e.onTurnEnd,this.onGameEnd=e.onGameEnd,this.onTimerTick=e.onTimerTick,this.onAIThinking=e.onAIThinking}}const j=()=>{const[e,s]=(0,o.useState)("mode-selection"),[t,n]=(0,o.useState)("solo"),[i,c]=(0,o.useState)(2),[l,d]=(0,o.useState)([]),[u,m]=(0,o.useState)({keywordPoolSize:50,answerCount:5,hintCount:5,timeLimit:60,maxTurns:20,difficulty:"intermediate"}),[h,g]=(0,o.useState)({keywords:[],answers:[],playerHints:{},isReady:!1,currentTurn:0,turnHistory:[],gameStatus:"playing",revealedAnswers:[],revealedWrongAnswers:[],hintsViewed:{}}),[p,x]=(0,o.useState)(0),[y,w]=(0,o.useState)([]),[j,b]=(0,o.useState)(0),[C,N]=(0,o.useState)(!1),[T,k]=(0,o.useState)(!1),[A,I]=(0,o.useState)(0),[S,E]=(0,o.useState)(null),[G,H]=(0,o.useState)(!1),[M,P]=(0,o.useState)(null),[W,L]=(0,o.useState)("medium"),[_,D]=(0,o.useState)(!1),U=(0,o.useRef)(null),[F,R]=(0,o.useState)(0),[O,z]=(0,o.useState)({isOpen:!1,playerId:null}),X=e=>{n(e),"solo"===e?s("difficulty-selection"):(d([]),s("player-setup"))},V=e=>{L(e),c(2),d([{id:1,nickname:"",type:"human",aiLanguage:"javascript"},{id:2,nickname:"AI (".concat("easy"===e?"\uc26c\uc6c0":"medium"===e?"\ubcf4\ud1b5":"\uc5b4\ub824\uc6c0",")"),type:"built-in-ai",aiDifficulty:e}]),s("player-setup")},B=(e,s)=>{d((t=>t.map((t=>t.id===e?(0,a.A)((0,a.A)({},t),s):t))))},K=()=>{console.log("Moving to game config with players:",l),s("game-config")},J=()=>{console.log("Game config complete:",u),x(0),s("game-preparation"),Y()},q={animals:["\uc0ac\uc790","\ud638\ub791\uc774","\ucf54\ub07c\ub9ac","\uae30\ub9b0","\uc6d0\uc22d\uc774","\ucf54\uc54c\ub77c","\ud310\ub2e4","\ud3ad\uadc4","\ub3c5\uc218\ub9ac","\uc0c1\uc5b4","\uace0\ub798","\ub3cc\uace0\ub798","\ud1a0\ub07c","\uace0\uc591\uc774","\uac15\uc544\uc9c0","\ub9d0","\uc18c","\ub3fc\uc9c0","\uc591","\uc5fc\uc18c"],foods:["\ud53c\uc790","\ud584\ubc84\uac70","\uc2a4\ud30c\uac8c\ud2f0","\ucd08\ubc25","\uae40\uce58\ucc0c\uac1c","\ubd88\uace0\uae30","\uce58\ud0a8","\ub77c\uba74","\ub5a1\ubcf6\uc774","\uae40\ubc25","\uc0d0\ub7ec\ub4dc","\uc2a4\ud14c\uc774\ud06c","\uce74\ub808","\uc6b0\ub3d9","\ub0c9\uba74","\ube44\ube54\ubc25","\uac08\ube44","\uc0bc\uacb9\uc0b4","\ud68c","\uc871\ubc1c"],objects:["\ucef4\ud4e8\ud130","\uc2a4\ub9c8\ud2b8\ud3f0","\uc790\ub3d9\ucc28","\ube44\ud589\uae30","\uae30\ucc28","\uc790\uc804\uac70","\ucc45","\uc5f0\ud544","\uac00\ubc29","\uc2dc\uacc4","\uc548\uacbd","\ubaa8\uc790","\uc2e0\ubc1c","\uc637","\uce68\ub300","\uc758\uc790","\ucc45\uc0c1","\ub0c9\uc7a5\uace0","\uc138\ud0c1\uae30","\ud154\ub808\ube44\uc804"],places:["\ud559\uad50","\ubcd1\uc6d0","\uc740\ud589","\uce74\ud398","\uc2dd\ub2f9","\uacf5\uc6d0","\ud574\ubcc0","\uc0b0","\ub3c4\uc11c\uad00","\ubc15\ubb3c\uad00","\uc601\ud654\uad00","\uc1fc\ud551\ubab0","\uc2dc\uc7a5","\uad50\ud68c","\uc9c0\ud558\ucca0\uc5ed","\uacf5\ud56d","\ud638\ud154","\uc9d1","\ud68c\uc0ac","\uccb4\uc721\uad00"],actions:["\uac77\uae30","\ub6f0\uae30","\uc218\uc601","\ucda4\ucd94\uae30","\ub178\ub798\ud558\uae30","\uc694\ub9ac\ud558\uae30","\uacf5\ubd80\ud558\uae30","\uc6b4\uc804\ud558\uae30","\uadf8\ub9bc\uadf8\ub9ac\uae30","\uae00\uc4f0\uae30","\uc77d\uae30","\uc7a0\uc790\uae30","\uba39\uae30","\ub9c8\uc2dc\uae30","\uc6c3\uae30","\uc6b8\uae30","\uc0dd\uac01\ud558\uae30","\ub9d0\ud558\uae30","\ub4e3\uae30","\ubcf4\uae30"]},Y=async()=>{x(1),await new Promise((e=>setTimeout(e,1e3)));const e=(s=u.keywordPoolSize,[...Object.values(q).flat()].sort((()=>Math.random()-.5)).slice(0,s));var s;x(2),await new Promise((e=>setTimeout(e,1e3)));const t=[],n=Array.from({length:e.length},((e,s)=>s)).sort((()=>Math.random()-.5));for(let a=0;a<u.answerCount;a++)t.push(n[a]);x(3),await new Promise((e=>setTimeout(e,1e3)));const r={},i=n.filter((e=>!t.includes(e)));l.forEach((e=>{const s=[],t=[...i].sort((()=>Math.random()-.5));for(let n=0;n<u.hintCount&&n<t.length;n++)s.push(t[n]);r[e.id]=s})),x(4),await new Promise((e=>setTimeout(e,1e3))),g({keywords:e,answers:t,playerHints:r,isReady:!0,currentTurn:0,turnHistory:[],gameStatus:"playing",revealedAnswers:[],revealedWrongAnswers:[],hintsViewed:{}}),x(5)},Z=()=>{const e=new f({keywordPoolSize:u.keywordPoolSize,answerCount:u.answerCount,hintCount:u.hintCount,timeLimit:u.timeLimit,maxTurns:u.maxTurns}),t=l.map((e=>{const s={id:e.id,nickname:e.nickname,type:e.type,aiDifficulty:e.aiDifficulty,customCode:e.aiCode,customLanguage:e.aiLanguage};return v.createPlayer(s)}));e.setPlayers(t),e.setEventHandlers({onTurnStart:s=>{const t=s.getInfo();N("human"===t.type),R(Date.now());const n=e.getGameContext();g((e=>(0,a.A)((0,a.A)({},e),{},{currentTurn:n.currentTurn})))},onTurnEnd:e=>{D(!1),g((s=>(0,a.A)((0,a.A)({},s),{},{turnHistory:[...s.turnHistory,e]})))},onGameEnd:e=>{if(e){const s=e.getInfo();g((e=>(0,a.A)((0,a.A)({},e),{},{gameStatus:"finished",winner:s.id})))}else g((e=>(0,a.A)((0,a.A)({},e),{},{gameStatus:"finished"})))},onTimerTick:e=>{b(e)},onAIThinking:e=>{D(e)}}),U.current=e,k(!0),I(1),s("game")},$=()=>{if(U.current)return;Q(),R(Date.now()),b(u.timeLimit);const e=setInterval((()=>{b((s=>s<=1?(clearInterval(e),E(null),setTimeout((()=>{ee()}),0),0):s-1))}),1e3);E(e)},Q=()=>{S&&(clearInterval(S),E(null))},ee=()=>{const e=[...h.keywords.map(((e,s)=>s)).filter((e=>!h.revealedWrongAnswers.includes(e)))].sort((()=>Math.random()-.5)).slice(0,u.answerCount);w(e),setTimeout((()=>{ie(e)}),500)},se=()=>{Q(),M&&(clearTimeout(M),P(null)),U.current&&(U.current.stopGame(),U.current=null),s("mode-selection"),g({keywords:[],answers:[],playerHints:{},isReady:!1,currentTurn:0,turnHistory:[],gameStatus:"playing",revealedAnswers:[],revealedWrongAnswers:[],hintsViewed:{}}),w([]),b(0),N(!1),D(!1),k(!1),I(0),H(!1)},te=()=>{if(U.current){if(U.current.revealAnswer()){const e=U.current.getGameContext();g((s=>(0,a.A)((0,a.A)({},s),{},{revealedAnswers:e.revealedAnswers})))}}else{const e=h.answers.filter((e=>!h.revealedAnswers.includes(e)));if(e.length>0){const s=e[Math.floor(Math.random()*e.length)];g((e=>(0,a.A)((0,a.A)({},e),{},{revealedAnswers:[...e.revealedAnswers,s]})))}}},ne=()=>{if(U.current){if(U.current.revealWrongAnswer()){const e=U.current.getGameContext();g((s=>(0,a.A)((0,a.A)({},s),{},{revealedWrongAnswers:e.revealedWrongAnswers})))}}else{const e=h.keywords.map(((e,s)=>s)).filter((e=>!h.answers.includes(e)&&!h.revealedWrongAnswers.includes(e)));if(e.length>0){const s=e[Math.floor(Math.random()*e.length)];g((e=>(0,a.A)((0,a.A)({},e),{},{revealedWrongAnswers:[...e.revealedWrongAnswers,s]})))}}},re=async()=>{if(y.length===u.answerCount&&!G)if(U.current){H(!0);try{await U.current.submitHumanGuess(y),w([])}catch(e){console.error("Failed to submit guess:",e)}finally{H(!1)}}else ie(y)},ie=e=>{if(U.current)return;if(G)return;H(!0),Q();const s=e.filter((e=>h.answers.includes(e))).length,t=s===u.answerCount&&e.every((e=>h.answers.includes(e))),n=(h.currentTurn-1)%l.length+1,r=l.find((e=>e.id===n)),i=F?Math.round((Date.now()-F)/1e3):u.timeLimit-j,o={playerId:n,playerName:(null===r||void 0===r?void 0:r.nickname)||"\ud50c\ub808\uc774\uc5b4 ".concat(n),guess:[...e],guessKeywords:e.map((e=>h.keywords[e])),correctCount:s,turnNumber:h.currentTurn,timeUsed:i},c=u.maxTurns&&h.currentTurn>=u.maxTurns;g((e=>(0,a.A)((0,a.A)({},e),{},{turnHistory:[...e.turnHistory,o],currentTurn:e.currentTurn+1,gameStatus:t||c?"finished":"playing",winner:t?n:void 0}))),w([]),t||c||setTimeout((()=>{$()}),100),setTimeout((()=>{H(!1)}),500)},ae={beginner:{keywordPoolSize:30,answerCount:3,hintCount:5,timeLimit:90,maxTurns:15},intermediate:{keywordPoolSize:50,answerCount:5,hintCount:5,timeLimit:60,maxTurns:20},advanced:{keywordPoolSize:80,answerCount:7,hintCount:4,timeLimit:45,maxTurns:25}},oe=e=>{const s=ae[e];m((0,a.A)((0,a.A)({},s),{},{difficulty:e}))},ce=e=>{m((s=>(0,a.A)((0,a.A)((0,a.A)({},s),e),{},{difficulty:"custom"})))};(0,o.useEffect)((()=>()=>{Q(),M&&clearTimeout(M)}),[]);return(0,r.jsx)("div",{className:"deduction-game",children:(0,r.jsxs)("div",{className:"game-content",children:[(0,r.jsxs)("div",{className:"game-wrapper",children:[(0,r.jsxs)("div",{className:"game-header",children:[(0,r.jsx)("h1",{children:"Exclusive Deduction Game"}),(0,r.jsx)("p",{children:"\uc11c\ub85c \ub2e4\ub978 \ub2e8\uc11c\ub85c \uc815\ub2f5\uc744 \ucd94\ub860\ud558\ub294 \uac8c\uc784"})]}),"mode-selection"===e&&(0,r.jsxs)("div",{className:"game-screen mode-selection",children:[(0,r.jsx)("h2",{children:"\uac8c\uc784 \ubaa8\ub4dc\ub97c \uc120\ud0dd\ud558\uc138\uc694"}),(0,r.jsxs)("div",{className:"mode-cards",children:[(0,r.jsxs)("div",{className:"mode-card",onClick:()=>X("solo"),children:[(0,r.jsx)("h3",{children:"\uac1c\uc778\uc804"}),(0,r.jsxs)("p",{children:["AI\uc640 1:1 \ub300\uacb0\ud558\ub294 \ubaa8\ub4dc\uc785\ub2c8\ub2e4.",(0,r.jsx)("br",{}),"\ub09c\uc774\ub3c4\ub97c \uc120\ud0dd\ud560 \uc218 \uc788\uc5b4\uc694."]})]}),(0,r.jsxs)("div",{className:"mode-card",onClick:()=>X("multi"),children:[(0,r.jsx)("h3",{children:"\uba40\ud2f0\ud50c\ub808\uc774"}),(0,r.jsxs)("p",{children:["2~6\uba85\uc774 \ud568\uaed8 \ud50c\ub808\uc774\ud558\ub294 \ubaa8\ub4dc\uc785\ub2c8\ub2e4.",(0,r.jsx)("br",{}),"\uce5c\uad6c\ub4e4\uacfc \ud568\uaed8 \uc990\uaca8\ubcf4\uc138\uc694."]})]})]})]}),"difficulty-selection"===e&&(0,r.jsxs)("div",{className:"game-screen difficulty-selection",children:[(0,r.jsx)("div",{className:"setup-actions",style:{justifyContent:"flex-start",marginBottom:"30px"},children:(0,r.jsx)("button",{className:"btn-large btn-secondary",onClick:()=>s("mode-selection"),children:"\u2190 \ub4a4\ub85c\uac00\uae30"})}),(0,r.jsx)("h2",{children:"AI \ub09c\uc774\ub3c4\ub97c \uc120\ud0dd\ud558\uc138\uc694"}),(0,r.jsxs)("div",{className:"difficulty-cards",children:[(0,r.jsxs)("div",{className:"difficulty-card",onClick:()=>V("easy"),children:[(0,r.jsx)("h3",{children:"\ud83c\udf31 \uc26c\uc6c0"}),(0,r.jsxs)("p",{children:["AI\uac00 \ubb34\uc791\uc704\ub85c \ud0a4\uc6cc\ub4dc\ub97c \uc120\ud0dd\ud569\ub2c8\ub2e4.",(0,r.jsx)("br",{}),"\ud3b8\uc548\ud558\uac8c \uac8c\uc784\uc744 \uc990\uae30\uc138\uc694."]})]}),(0,r.jsxs)("div",{className:"difficulty-card",onClick:()=>V("medium"),children:[(0,r.jsx)("h3",{children:"\ud83c\udf3f \ubcf4\ud1b5"}),(0,r.jsxs)("p",{children:["AI\uac00 \uacf5\uac1c\ub41c \uc815\ub2f5\uc744 \ud65c\uc6a9\ud569\ub2c8\ub2e4.",(0,r.jsx)("br",{}),"\uc801\ub2f9\ud55c \ub3c4\uc804\uc744 \uc6d0\ud55c\ub2e4\uba74 \uc120\ud0dd\ud558\uc138\uc694."]})]}),(0,r.jsxs)("div",{className:"difficulty-card",onClick:()=>V("hard"),children:[(0,r.jsx)("h3",{children:"\ud83c\udf33 \uc5b4\ub824\uc6c0"}),(0,r.jsxs)("p",{children:["AI\uac00 \uc774\uc804 \ucd94\uce21\uc744 \ubd84\uc11d\ud569\ub2c8\ub2e4.",(0,r.jsx)("br",{}),"\uc9c4\uc815\ud55c \uc2e4\ub825\uc744 \uc2dc\ud5d8\ud574\ubcf4\uc138\uc694."]})]})]})]}),"player-setup"===e&&(0,r.jsxs)("div",{className:"game-screen",children:[(0,r.jsx)("div",{className:"setup-actions",children:(0,r.jsx)("button",{className:"btn-large btn-secondary",onClick:()=>s("mode-selection"),children:"\u2190 \ub4a4\ub85c\uac00\uae30"})}),"multi"===t&&0===l.length&&(0,r.jsxs)("div",{className:"form-section",children:[(0,r.jsx)("h2",{children:"\ud50c\ub808\uc774\uc5b4 \uc218\ub97c \uc120\ud0dd\ud558\uc138\uc694"}),(0,r.jsx)("div",{className:"btn-group",style:{justifyContent:"center",marginTop:"20px"},children:[2,3,4,5,6].map((e=>(0,r.jsxs)("button",{className:"btn-large btn-secondary",onClick:()=>(e=>{c(e);const s=[];for(let t=1;t<=e;t++)s.push({id:t,nickname:"",type:"human",aiLanguage:"javascript"});d(s)})(e),children:[e,"\uba85"]},e)))})]}),l.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"solo"===t?"\ud50c\ub808\uc774\uc5b4 \uc124\uc815":"".concat(i,"\uba85 \ud50c\ub808\uc774\uc5b4 \uc124\uc815")}),(0,r.jsx)("div",{className:"players-grid",children:l.filter((e=>"solo"!==t||"human"===e.type)).map((e=>(0,r.jsxs)("div",{className:"player-setup",children:[(0,r.jsx)("h4",{children:"solo"===t?"\ud50c\ub808\uc774\uc5b4":"\ud50c\ub808\uc774\uc5b4 ".concat(e.id)}),(0,r.jsx)("div",{className:"form-section",children:(0,r.jsx)("input",{type:"text",className:"input-field",placeholder:"\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud558\uc138\uc694",value:e.nickname,onChange:s=>B(e.id,{nickname:s.target.value}),maxLength:20})}),"multi"===t&&(0,r.jsx)("div",{className:"form-section",children:(0,r.jsxs)("div",{className:"radio-group",children:[(0,r.jsxs)("div",{className:"radio-option",children:[(0,r.jsx)("input",{type:"radio",id:"human-".concat(e.id),name:"playerType-".concat(e.id),value:"human",checked:"human"===e.type,onChange:()=>B(e.id,{type:"human",aiCode:""})}),(0,r.jsx)("label",{htmlFor:"human-".concat(e.id),children:"\uc778\uac04"})]}),(0,r.jsxs)("div",{className:"radio-option",children:[(0,r.jsx)("input",{type:"radio",id:"ai-".concat(e.id),name:"playerType-".concat(e.id),value:"custom-ai",checked:"custom-ai"===e.type,onChange:()=>{B(e.id,{type:"custom-ai"}),z({isOpen:!0,playerId:e.id})}}),(0,r.jsx)("label",{htmlFor:"ai-".concat(e.id),children:"AI"})]})]})}),"custom-ai"===e.type&&(0,r.jsxs)("div",{className:"form-section",children:[(0,r.jsxs)("button",{className:"btn-large btn-ai-code",onClick:()=>z({isOpen:!0,playerId:e.id}),style:{width:"100%"},children:[(0,r.jsx)("span",{className:"btn-ai-icon",children:"</>"}),(0,r.jsx)("span",{children:e.aiCode?"AI \ucf54\ub4dc \uc218\uc815":"AI \ucf54\ub4dc \uc791\uc131"})]}),e.aiCode&&(0,r.jsx)("div",{className:"code-preview",children:(0,r.jsxs)("small",{children:["\ucf54\ub4dc\uac00 \uc791\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4 (",e.aiCode.split("\n").length,"\uc904)"]})})]})]},e.id)))}),(0,r.jsx)("div",{className:"setup-actions",children:(0,r.jsx)("button",{className:"btn-large btn-primary",onClick:K,disabled:!l.every((e=>{var s;return!!e.nickname.trim()&&!!("custom-ai"!==e.type||null!==(s=e.aiCode)&&void 0!==s&&s.trim())})),children:"\uac8c\uc784 \uc2dc\uc791"})})]})]}),"game-config"===e&&(0,r.jsxs)("div",{className:"game-screen",children:[(0,r.jsx)("div",{className:"setup-actions",style:{justifyContent:"flex-start",marginBottom:"30px"},children:(0,r.jsx)("button",{className:"btn-large btn-secondary",onClick:()=>s("player-setup"),children:"\u2190 \ub4a4\ub85c\uac00\uae30"})}),(0,r.jsx)("h2",{children:"\uac8c\uc784 \uc124\uc815"}),(0,r.jsxs)("div",{className:"form-section",children:[(0,r.jsx)("h3",{children:"\ub09c\uc774\ub3c4 \ud504\ub9ac\uc14b"}),(0,r.jsxs)("div",{className:"btn-group",style:{justifyContent:"center",flexWrap:"wrap"},children:[(0,r.jsx)("button",{className:"btn-large ".concat("beginner"===u.difficulty?"btn-primary":"btn-secondary"),onClick:()=>oe("beginner"),children:"\ucd08\uae09"}),(0,r.jsx)("button",{className:"btn-large ".concat("intermediate"===u.difficulty?"btn-primary":"btn-secondary"),onClick:()=>oe("intermediate"),children:"\uc911\uae09"}),(0,r.jsx)("button",{className:"btn-large ".concat("advanced"===u.difficulty?"btn-primary":"btn-secondary"),onClick:()=>oe("advanced"),children:"\uace0\uae09"})]})]}),(0,r.jsxs)("div",{className:"config-grid",children:[(0,r.jsxs)("div",{className:"config-item",children:[(0,r.jsx)("h4",{children:"\ud0a4\uc6cc\ub4dc \ud480 \ud06c\uae30"}),(0,r.jsx)("p",{children:"\uc804\uccb4 \ud0a4\uc6cc\ub4dc \uac1c\uc218"}),(0,r.jsxs)("div",{className:"number-input-group",children:[(0,r.jsx)("button",{className:"btn btn-small",onClick:()=>ce({keywordPoolSize:Math.max(20,u.keywordPoolSize-10)}),children:"-"}),(0,r.jsxs)("span",{className:"number-display",children:[u.keywordPoolSize,"\uac1c"]}),(0,r.jsx)("button",{className:"btn btn-small",onClick:()=>ce({keywordPoolSize:Math.min(100,u.keywordPoolSize+10)}),children:"+"})]})]}),(0,r.jsxs)("div",{className:"config-item",children:[(0,r.jsx)("h4",{children:"\uc815\ub2f5 \uac1c\uc218"}),(0,r.jsx)("p",{children:"\ucc3e\uc544\uc57c \ud560 \uc815\ub2f5 \uc218"}),(0,r.jsxs)("div",{className:"number-input-group",children:[(0,r.jsx)("button",{className:"btn btn-small",onClick:()=>ce({answerCount:Math.max(2,u.answerCount-1)}),children:"-"}),(0,r.jsxs)("span",{className:"number-display",children:[u.answerCount,"\uac1c"]}),(0,r.jsx)("button",{className:"btn btn-small",onClick:()=>ce({answerCount:Math.min(15,u.answerCount+1)}),children:"+"})]})]}),(0,r.jsxs)("div",{className:"config-item",children:[(0,r.jsx)("h4",{children:"\ud78c\ud2b8 \uac1c\uc218"}),(0,r.jsx)("p",{children:"\uac01 \ud50c\ub808\uc774\uc5b4\ubcc4 \uc624\ub2f5 \ud78c\ud2b8"}),(0,r.jsxs)("div",{className:"number-input-group",children:[(0,r.jsx)("button",{className:"btn btn-small",onClick:()=>ce({hintCount:Math.max(2,u.hintCount-1)}),children:"-"}),(0,r.jsxs)("span",{className:"number-display",children:[u.hintCount,"\uac1c"]}),(0,r.jsx)("button",{className:"btn btn-small",onClick:()=>ce({hintCount:Math.min(20,u.hintCount+1)}),children:"+"})]})]}),(0,r.jsxs)("div",{className:"config-item",children:[(0,r.jsx)("h4",{children:"\ud134 \uc81c\ud55c\uc2dc\uac04"}),(0,r.jsx)("p",{children:"\uac01 \ud134\ub2f9 \uc2dc\uac04"}),(0,r.jsxs)("div",{className:"number-input-group",children:[(0,r.jsx)("button",{className:"btn btn-small",onClick:()=>ce({timeLimit:Math.max(15,u.timeLimit-15)}),children:"-"}),(0,r.jsxs)("span",{className:"number-display",children:[u.timeLimit,"\ucd08"]}),(0,r.jsx)("button",{className:"btn btn-small",onClick:()=>ce({timeLimit:Math.min(180,u.timeLimit+15)}),children:"+"})]})]}),(0,r.jsxs)("div",{className:"config-item",children:[(0,r.jsx)("h4",{children:"\ucd5c\ub300 \ud134 \uc218"}),(0,r.jsx)("p",{children:"\uac8c\uc784 \uc885\ub8cc \uc870\uac74"}),(0,r.jsxs)("div",{className:"number-input-group",children:[(0,r.jsx)("button",{className:"btn btn-small",onClick:()=>ce({maxTurns:u.maxTurns?Math.max(5,u.maxTurns-5):15}),children:"-"}),(0,r.jsx)("span",{className:"number-display",children:u.maxTurns?"".concat(u.maxTurns,"\ud134"):"\ubb34\uc81c\ud55c"}),(0,r.jsx)("button",{className:"btn btn-small",onClick:()=>ce({maxTurns:u.maxTurns?Math.min(50,u.maxTurns+5):20}),children:"+"})]}),(0,r.jsx)("button",{className:"btn btn-small",onClick:()=>ce({maxTurns:u.maxTurns?void 0:20}),style:{marginTop:"10px"},children:u.maxTurns?"\ubb34\uc81c\ud55c\uc73c\ub85c \ubcc0\uacbd":"\uc81c\ud55c \uc124\uc815"})]})]}),(0,r.jsx)("div",{className:"difficulty-indicator",children:(0,r.jsxs)("span",{children:["\ud604\uc7ac \ub09c\uc774\ub3c4: ",(0,r.jsx)("strong",{children:"beginner"===u.difficulty?"\ucd08\uae09":"intermediate"===u.difficulty?"\uc911\uae09":"advanced"===u.difficulty?"\uace0\uae09":"\ucee4\uc2a4\ud140"})]})}),(0,r.jsx)("div",{className:"setup-actions",children:(0,r.jsx)("button",{className:"btn-large btn-primary",onClick:J,children:"\uc124\uc815 \uc644\ub8cc"})})]}),"game-preparation"===e&&(()=>{const e=[{title:"\uac8c\uc784 \ucd08\uae30\ud654",description:"\uac8c\uc784 \ud658\uacbd\uc744 \uc124\uc815\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4."},{title:"\ud0a4\uc6cc\ub4dc \uc0dd\uc131",description:"".concat(u.keywordPoolSize,"\uac1c\uc758 \ud0a4\uc6cc\ub4dc\ub97c \uc0dd\uc131\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.")},{title:"\uc815\ub2f5 \uc120\ud0dd",description:"".concat(u.answerCount,"\uac1c\uc758 \uc815\ub2f5\uc744 \ubb34\uc791\uc704\ub85c \uc120\ud0dd\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.")},{title:"\ud78c\ud2b8 \ubc30\ud3ec",description:"\uac01 \ud50c\ub808\uc774\uc5b4\uc5d0\uac8c \uc624\ub2f5 \ud78c\ud2b8\ub97c \ubc30\ud3ec\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4."},{title:"\ucd5c\uc885 \ud655\uc778",description:"\uac8c\uc784 \uc900\ube44\ub97c \uc644\ub8cc\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4."}];return(0,r.jsx)("div",{className:"game-screen",children:p<5?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"\uac8c\uc784 \uc900\ube44 \uc911..."}),(0,r.jsxs)("div",{className:"preparation-progress",children:[(0,r.jsx)("div",{className:"progress-steps",children:e.map(((e,s)=>(0,r.jsxs)("div",{className:"progress-step ".concat(s<p?"completed":s===p?"active":"pending"),children:[(0,r.jsx)("div",{className:"step-circle",children:s<p?"\u2713":s+1}),(0,r.jsxs)("div",{className:"step-content",children:[(0,r.jsx)("h4",{children:e.title}),(0,r.jsx)("p",{children:e.description})]})]},s)))}),(0,r.jsx)("div",{className:"progress-bar-container",children:(0,r.jsx)("div",{className:"progress-bar-fill",style:{width:"".concat(p/5*100,"%")}})})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"\uac8c\uc784 \uc900\ube44 \uc644\ub8cc!"}),(0,r.jsxs)("div",{className:"game-summary",children:[(0,r.jsxs)("div",{className:"summary-grid",children:[(0,r.jsxs)("div",{className:"summary-item",children:[(0,r.jsx)("h4",{children:"\ucc38\uac00\uc790"}),(0,r.jsx)("div",{className:"player-chips",children:l.map((e=>(0,r.jsxs)("span",{className:"player-chip",children:[e.nickname," (","built-in-ai"===e.type?"AI":"custom-ai"===e.type?"Custom AI":"\uc778\uac04",")"]},e.id)))})]}),(0,r.jsxs)("div",{className:"summary-item",children:[(0,r.jsx)("h4",{children:"\uac8c\uc784 \uc815\ubcf4"}),(0,r.jsxs)("div",{className:"game-info-grid",children:[(0,r.jsxs)("div",{children:["\ud0a4\uc6cc\ub4dc \ud480: ",(0,r.jsxs)("strong",{children:[u.keywordPoolSize,"\uac1c"]})]}),(0,r.jsxs)("div",{children:["\uc815\ub2f5 \uac1c\uc218: ",(0,r.jsxs)("strong",{children:[u.answerCount,"\uac1c"]})]}),(0,r.jsxs)("div",{children:["\ud78c\ud2b8 \uac1c\uc218: ",(0,r.jsxs)("strong",{children:[u.hintCount,"\uac1c"]})]}),(0,r.jsxs)("div",{children:["\ud134 \uc2dc\uac04: ",(0,r.jsxs)("strong",{children:[u.timeLimit,"\ucd08"]})]}),(0,r.jsxs)("div",{children:["\ucd5c\ub300 \ud134: ",(0,r.jsx)("strong",{children:u.maxTurns||"\ubb34\uc81c\ud55c"})]})]})]})]}),(0,r.jsxs)("div",{className:"game-start-section",children:[(0,r.jsxs)("div",{className:"countdown-info",children:[(0,r.jsx)("h3",{children:"\ubaa8\ub4e0 \uc900\ube44\uac00 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"}),(0,r.jsx)("p",{children:"\uac8c\uc784\uc744 \uc2dc\uc791\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"})]}),(0,r.jsxs)("div",{className:"setup-actions",children:[(0,r.jsx)("button",{className:"btn-large btn-secondary",onClick:()=>s("game-config"),children:"\u2190 \uc124\uc815 \ubcc0\uacbd"}),(0,r.jsx)("button",{className:"btn-large btn-primary",onClick:Z,children:"\uac8c\uc784 \uc2dc\uc791! \ud83c\udfae"})]})]})]})]})})})(),"game"===e&&(()=>{const e=(()=>{if(U.current){const e=U.current.getCurrentPlayer();if(e){const s=e.getInfo();return l.find((e=>e.id===s.id))}}const e=(h.currentTurn-1)%l.length+1;return l.find((s=>s.id===e))})(),t="finished"===h.gameStatus||u.maxTurns&&h.currentTurn>u.maxTurns;if(T){var n;const e=l.find((e=>e.id===A)),s=h.hintsViewed[A];if("built-in-ai"===(null===e||void 0===e?void 0:e.type)){const e=A+1;return e<=l.length?setTimeout((()=>I(e)),0):(k(!1),U.current?U.current.startGame(h.keywords,h.answers,h.playerHints):setTimeout((()=>{g((e=>(0,a.A)((0,a.A)({},e),{},{currentTurn:1}))),$()}),100)),null}return(0,r.jsx)("div",{className:"game-screen",children:(0,r.jsxs)("div",{className:"hint-viewing-phase",children:[(0,r.jsx)("div",{className:"exit-button-container",children:(0,r.jsx)("button",{className:"btn btn-exit-small",onClick:se,children:"\uac8c\uc784 \uc885\ub8cc"})}),(0,r.jsx)("h2",{children:"\ud78c\ud2b8 \ud655\uc778 \ub2e8\uacc4"}),(0,r.jsxs)("div",{className:"viewing-instructions",children:[(0,r.jsxs)("h3",{children:[null===e||void 0===e?void 0:e.nickname,"\ub2d8\uc758 \ucc28\ub840\uc785\ub2c8\ub2e4"]}),(0,r.jsx)("p",{children:"\ub2e4\ub978 \ud50c\ub808\uc774\uc5b4\ub294 \ud654\uba74\uc744 \ubcf4\uc9c0 \ub9c8\uc138\uc694!"}),s?(0,r.jsxs)("div",{className:"hint-display",children:[(0,r.jsx)("h4",{children:"\ub0b4 \ud78c\ud2b8 (\uc774 \ud0a4\uc6cc\ub4dc\ub4e4\uc740 \uc815\ub2f5\uc774 \uc544\ub2d9\ub2c8\ub2e4)"}),(0,r.jsx)("div",{className:"hint-chips",children:null===(n=h.playerHints[A])||void 0===n?void 0:n.map((e=>(0,r.jsx)("span",{className:"hint-chip",children:h.keywords[e]},e)))}),(0,r.jsx)("p",{children:"\ud78c\ud2b8\ub97c \uae30\uc5b5\ud558\uace0 \ub2e4\uc74c \ubc84\ud2bc\uc744 \ub20c\ub7ec\uc8fc\uc138\uc694."}),(0,r.jsx)("button",{className:"btn-large btn-secondary",onClick:()=>{const e=A+1;e<=l.length?I(e):(k(!1),U.current?U.current.startGame(h.keywords,h.answers,h.playerHints):setTimeout((()=>{g((e=>(0,a.A)((0,a.A)({},e),{},{currentTurn:1}))),$()}),100))},children:"\ud655\uc778 \uc644\ub8cc"})]}):(0,r.jsxs)("div",{className:"hint-reveal",children:[(0,r.jsx)("p",{children:"\uc544\ub798 \ubc84\ud2bc\uc744 \ub20c\ub7ec \ubcf8\uc778\ub9cc\uc758 \ud78c\ud2b8\ub97c \ud655\uc778\ud558\uc138\uc694."}),(0,r.jsx)("button",{className:"btn-large btn-primary",onClick:()=>g((e=>(0,a.A)((0,a.A)({},e),{},{hintsViewed:(0,a.A)((0,a.A)({},e.hintsViewed),{},{[A]:!0})}))),children:"\ub0b4 \ud78c\ud2b8 \ubcf4\uae30"})]})]})]})})}var i;return t?(0,r.jsx)("div",{className:"game-screen",children:(0,r.jsxs)("div",{className:"game-over",children:[(0,r.jsx)("h2",{children:"\ud83c\udf89 \uac8c\uc784 \uc885\ub8cc!"}),h.winner?(0,r.jsxs)("div",{className:"winner-announcement",children:[(0,r.jsxs)("h3",{children:[null===(i=l.find((e=>e.id===h.winner)))||void 0===i?void 0:i.nickname,"\ub2d8\uc774 \uc2b9\ub9ac\ud588\uc2b5\ub2c8\ub2e4!"]}),(0,r.jsx)("p",{children:"\ucd95\ud558\ud569\ub2c8\ub2e4! \uc815\ub2f5\uc744 \ubaa8\ub450 \ub9de\ucd94\uc168\uc2b5\ub2c8\ub2e4."})]}):(0,r.jsxs)("div",{className:"draw-announcement",children:[(0,r.jsx)("h3",{children:"\ubb34\uc2b9\ubd80"}),(0,r.jsx)("p",{children:"\ucd5c\ub300 \ud134 \uc218\uc5d0 \ub3c4\ub2ec\ud588\uc2b5\ub2c8\ub2e4."})]}),(0,r.jsxs)("div",{className:"final-answers",children:[(0,r.jsx)("h4",{children:"\uc815\ub2f5\uc740:"}),(0,r.jsx)("div",{className:"answer-list",children:h.answers.map((e=>(0,r.jsx)("span",{className:"answer-chip",children:h.keywords[e]},e)))})]}),(0,r.jsxs)("div",{className:"game-history",children:[(0,r.jsx)("h4",{children:"\uac8c\uc784 \uae30\ub85d"}),(0,r.jsx)("div",{className:"history-list",children:h.turnHistory.map(((e,s)=>(0,r.jsxs)("div",{className:"history-item",children:[(0,r.jsxs)("div",{className:"turn-info",children:[(0,r.jsxs)("strong",{children:["\ud134 ",e.turnNumber]})," - ",e.playerName]}),(0,r.jsxs)("div",{className:"turn-keywords",children:["\uc120\ud0dd: ",e.guessKeywords.join(", ")]}),(0,r.jsxs)("div",{className:"turn-result",children:[e.correctCount,"/",u.answerCount," \uc815\ub2f5 (",e.timeUsed,"\ucd08 \uc18c\uc694)"]})]},s)))})]}),(0,r.jsx)("div",{className:"setup-actions",children:(0,r.jsx)("button",{className:"btn-large btn-secondary",onClick:()=>s("mode-selection"),children:"\uc0c8 \uac8c\uc784"})})]})}):(0,r.jsxs)("div",{className:"game-screen game-playing",children:[(0,r.jsxs)("div",{className:"game-header-info",children:[(0,r.jsxs)("div",{className:"turn-info",children:[(0,r.jsxs)("h3",{children:["\ud134 ",h.currentTurn,u.maxTurns&&" / ".concat(u.maxTurns)]}),(0,r.jsxs)("p",{children:[null===e||void 0===e?void 0:e.nickname,"\uc758 \ucc28\ub840",_&&(0,r.jsx)("span",{className:"ai-thinking",children:" (\uc0dd\uac01\ud558\ub294 \uc911...)"})]})]}),(0,r.jsxs)("div",{className:"header-controls",children:[(0,r.jsxs)("div",{className:"timer",children:[(0,r.jsxs)("div",{className:"time-display ".concat(j<=10?"warning":""),children:[j,"\ucd08"]}),(0,r.jsx)("div",{className:"timer-bar",children:(0,r.jsx)("div",{className:"timer-fill",style:{width:"".concat(j/u.timeLimit*100,"%"),backgroundColor:j<=10?"#FF5722":j<=30?"#FFC107":"#4CAF50"}})})]}),(0,r.jsx)("button",{className:"btn btn-exit",onClick:se,title:"\uac8c\uc784 \uc885\ub8cc",children:"\ub098\uac00\uae30"})]})]}),(0,r.jsxs)("div",{className:"game-layout",children:[(0,r.jsxs)("div",{className:"game-main",children:[(0,r.jsxs)("div",{className:"keyword-selection",children:[(0,r.jsxs)("h4",{children:["\ud0a4\uc6cc\ub4dc\ub97c \uc120\ud0dd\ud558\uc138\uc694 (",y.length,"/",u.answerCount,")"]}),(0,r.jsx)("div",{className:"keywords-grid",children:h.keywords.map(((e,s)=>{const t=y.includes(s),n=h.revealedAnswers.includes(s),i=h.revealedWrongAnswers.includes(s);return(0,r.jsxs)("button",{className:"keyword-btn ".concat(t?"selected":""," ").concat(n?"revealed-answer":""," ").concat(i?"revealed-wrong":""),onClick:()=>{return e=s,void w((s=>s.includes(e)?s.filter((s=>s!==e)):s.length<u.answerCount?[...s,e]:s));var e},disabled:G||_||!C,children:[e,n&&(0,r.jsx)("span",{className:"reveal-indicator",children:"\u2713"}),i&&(0,r.jsx)("span",{className:"reveal-indicator",children:"\u274c"})]},s)}))})]}),(0,r.jsxs)("div",{className:"guess-controls",children:[(0,r.jsxs)("div",{className:"selected-display",children:[(0,r.jsx)("h5",{children:"\uc120\ud0dd\ub41c \ud0a4\uc6cc\ub4dc:"}),(0,r.jsx)("div",{className:"selected-keywords",children:y.map((e=>(0,r.jsx)("span",{className:"selected-chip",children:h.keywords[e]},e)))})]}),(0,r.jsxs)("div",{className:"control-buttons",children:[(0,r.jsx)("button",{className:"btn-large btn-secondary",onClick:()=>w([]),disabled:0===y.length,children:"\uc120\ud0dd \ucd08\uae30\ud654"}),(0,r.jsx)("button",{className:"btn-large btn-primary",onClick:re,disabled:y.length!==u.answerCount||G,children:"\ucd94\uce21 \uc81c\ucd9c"})]})]})]}),(0,r.jsxs)("div",{className:"game-sidebar",children:[(0,r.jsxs)("div",{className:"global-hints",children:[(0,r.jsx)("h4",{children:"\uac8c\uc784 \ud78c\ud2b8"}),(0,r.jsxs)("div",{className:"hint-buttons",children:[(0,r.jsx)("button",{className:"btn btn-hint",onClick:te,disabled:h.answers.length===h.revealedAnswers.length,children:"\uc815\ub2f5 1\uac1c \uacf5\uac1c"}),(0,r.jsx)("button",{className:"btn btn-hint",onClick:ne,children:"\uc624\ub2f5 1\uac1c \uacf5\uac1c"})]}),(0,r.jsxs)("div",{className:"revealed-info",children:[h.revealedAnswers.length>0&&(0,r.jsx)("div",{children:(0,r.jsxs)("small",{children:["\uacf5\uac1c\ub41c \uc815\ub2f5: ",h.revealedAnswers.length,"\uac1c"]})}),h.revealedWrongAnswers.length>0&&(0,r.jsx)("div",{children:(0,r.jsxs)("small",{children:["\uacf5\uac1c\ub41c \uc624\ub2f5: ",h.revealedWrongAnswers.length,"\uac1c"]})})]})]}),(0,r.jsxs)("div",{className:"players-status",children:[(0,r.jsx)("h4",{children:"\ud50c\ub808\uc774\uc5b4 \ud604\ud669"}),(0,r.jsx)("div",{className:"players-list",children:l.map((s=>(0,r.jsxs)("div",{className:"player-status ".concat((null===e||void 0===e?void 0:e.id)===s.id?"current":""),children:[(0,r.jsx)("span",{className:"player-name",children:s.nickname}),(0,r.jsxs)("span",{className:"player-type",children:["(","built-in-ai"===s.type?"AI":"custom-ai"===s.type?"Custom AI":"\uc778\uac04",")"]})]},s.id)))})]}),(0,r.jsxs)("div",{className:"turn-history",children:[(0,r.jsx)("h4",{children:"\ud134 \uae30\ub85d"}),(0,r.jsx)("div",{className:"history-scroll",children:h.turnHistory.slice(-5).map(((e,s)=>(0,r.jsxs)("div",{className:"history-entry",children:[(0,r.jsx)("div",{className:"history-header",children:(0,r.jsxs)("span",{children:["\ud134 ",e.turnNumber,": ",e.playerName]})}),(0,r.jsx)("div",{className:"history-keywords",children:e.guessKeywords.join(", ")}),(0,r.jsxs)("div",{className:"history-result",children:[e.correctCount,"/",u.answerCount," \uc815\ub2f5"]})]},s)))})]})]})]})]})})()]}),(()=>{if(!O.isOpen||!O.playerId)return null;const e=l.find((e=>e.id===O.playerId));return e?(0,r.jsx)("div",{className:"modal-overlay",onClick:()=>z({isOpen:!1,playerId:null}),children:(0,r.jsxs)("div",{className:"modal-content code-editor-modal",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsxs)("h3",{children:[e.nickname," AI \ucf54\ub4dc \uc5d0\ub514\ud130"]}),(0,r.jsx)("button",{className:"modal-close",onClick:()=>z({isOpen:!1,playerId:null}),children:"\xd7"})]}),(0,r.jsxs)("div",{className:"code-editor-container",children:[(0,r.jsxs)("div",{className:"editor-toolbar",children:[(0,r.jsxs)("div",{className:"editor-left",children:[(0,r.jsx)("span",{className:"editor-info",children:"\ucf54\ub4dc \uc791\uc131"}),(0,r.jsxs)("div",{className:"language-selector",children:[(0,r.jsx)("button",{className:"lang-btn ".concat("javascript"===e.aiLanguage?"active":""),onClick:()=>B(e.id,{aiLanguage:"javascript"}),children:"JavaScript"}),(0,r.jsx)("button",{className:"lang-btn ".concat("typescript"===e.aiLanguage?"active":""),onClick:()=>B(e.id,{aiLanguage:"typescript"}),children:"TypeScript"})]})]}),(0,r.jsxs)("div",{className:"editor-actions",children:[(0,r.jsx)("button",{className:"btn btn-small",onClick:()=>B(e.id,{aiCode:""}),children:"\ucd08\uae30\ud654"}),(0,r.jsx)("button",{className:"btn btn-small",onClick:()=>{const s="typescript"===e.aiLanguage?"// AI \uc804\ub7b5 \ud568\uc218 (TypeScript)\ninterface GameState {\n  keywords: string[];\n  myHints: number[];\n  previousGuesses: number[][];\n  revealedAnswers: number[];\n  revealedWrongs: number[];\n  answerCount: number;\n}\n\nfunction makeGuess(gameState: GameState): number[] {\n  const { keywords, myHints, previousGuesses, revealedAnswers, revealedWrongs, answerCount } = gameState;\n  \n  // \uac00\ub2a5\ud55c \ud0a4\uc6cc\ub4dc \uc778\ub371\uc2a4 \ubaa9\ub85d\n  const availableIndices: number[] = keywords\n    .map((_, index) => index)\n    .filter(idx => !revealedWrongs.includes(idx));\n  \n  // \uc774\ubbf8 \uacf5\uac1c\ub41c \uc815\ub2f5 \uc6b0\uc120 \uc120\ud0dd\n  const selectedIndices: number[] = [...revealedAnswers];\n  \n  // \ub098\uba38\uc9c0\ub294 \ub79c\ub364 \uc120\ud0dd\n  while (selectedIndices.length < answerCount) {\n    const remaining = availableIndices.filter(idx => !selectedIndices.includes(idx));\n    if (remaining.length === 0) break;\n    \n    const randomIdx = remaining[Math.floor(Math.random() * remaining.length)];\n    selectedIndices.push(randomIdx);\n  }\n  \n  return selectedIndices;\n}":"// AI \uc804\ub7b5 \ud568\uc218 (JavaScript)\nfunction makeGuess(gameState) {\n  const { keywords, myHints, previousGuesses, revealedAnswers, revealedWrongs, answerCount } = gameState;\n  \n  // \uac00\ub2a5\ud55c \ud0a4\uc6cc\ub4dc \uc778\ub371\uc2a4 \ubaa9\ub85d\n  const availableIndices = keywords\n    .map((_, index) => index)\n    .filter(idx => !revealedWrongs.includes(idx));\n  \n  // \uc774\ubbf8 \uacf5\uac1c\ub41c \uc815\ub2f5 \uc6b0\uc120 \uc120\ud0dd\n  const selectedIndices = [...revealedAnswers];\n  \n  // \ub098\uba38\uc9c0\ub294 \ub79c\ub364 \uc120\ud0dd\n  while (selectedIndices.length < answerCount) {\n    const remaining = availableIndices.filter(idx => !selectedIndices.includes(idx));\n    if (remaining.length === 0) break;\n    \n    const randomIdx = remaining[Math.floor(Math.random() * remaining.length)];\n    selectedIndices.push(randomIdx);\n  }\n  \n  return selectedIndices;\n}";B(e.id,{aiCode:s})},children:"\uc608\uc81c \ucf54\ub4dc"})]})]}),(0,r.jsxs)("div",{className:"editor-wrapper",children:[(0,r.jsx)("div",{className:"line-numbers",children:((e.aiCode||"")+"\n").split("\n").map(((e,s)=>(0,r.jsx)("div",{className:"line-number",children:s+1},s)))}),(0,r.jsx)("textarea",{className:"code-editor",value:e.aiCode||"",onChange:s=>B(e.id,{aiCode:s.target.value}),placeholder:"typescript"===e.aiLanguage?"// TypeScript AI \uc804\ub7b5 \ucf54\ub4dc\ub97c \uc791\uc131\ud558\uc138\uc694\n// \ud0c0\uc785 \uc815\uc758\uc640 \ud568\uaed8 \uc791\uc131\ud574\uc8fc\uc138\uc694":"// JavaScript AI \uc804\ub7b5 \ucf54\ub4dc\ub97c \uc791\uc131\ud558\uc138\uc694\n// function makeGuess(gameState) { ... }",spellCheck:!1})]}),(0,r.jsxs)("div",{className:"editor-footer",children:[(0,r.jsxs)("div",{className:"code-stats",children:[(0,r.jsxs)("span",{children:["\uc904: ",(e.aiCode||"").split("\n").length]}),(0,r.jsxs)("span",{children:["\ubb38\uc790: ",(e.aiCode||"").length]})]}),(0,r.jsx)("button",{className:"btn-large btn-primary",onClick:()=>z({isOpen:!1,playerId:null}),children:"\uc800\uc7a5"})]})]})]})}):null})()]})})},b=()=>{const{subject:e}=(0,n.g)();console.log(e);return(0,r.jsx)("div",{className:"lab-page",children:(0,r.jsx)("main",{className:"lab-content",children:(()=>{switch(e){case"tetris":return(0,r.jsx)(i,{});case"deduction-game":return(0,r.jsx)(j,{});default:return(0,r.jsx)("h1",{className:"lab-title",children:"\uc900\ube44\uc911..."})}})()})})}},934:()=>{}}]);
//# sourceMappingURL=94.58102b30.chunk.js.map